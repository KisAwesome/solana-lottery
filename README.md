Solana Verifiable Lottery
A trust-minimized lottery draw for Solana token holders.

Seed: Blockhash from a finalized slot (or provided via block feed file).

Entrants: Holders snapshot from classic SPL Token and Token-2022 program accounts.

Winner: SHA-256(seed) mod total_tickets with deterministic entrant ordering.

Output: audit.json containing the necessary data to verify the result.

Why this is Fair
This program utilizes a Commit-Reveal scheme to ensure the draw cannot be manipulated by the developer or participants:

Commitment: A future slot is announced publicly before it is produced.

Randomness: The winning seed is derived from the blockhash of that specific slot. Because blockhashes are generated by the network at runtime, they are unpredictable.

Audit: The generated audit.json allows any third party to re-run the logic and confirm the winner was chosen correctly based on the on-chain data.

Features
Slot Prediction: Estimate the slot number for a specific target time based on current network performance.

Dual Program Support: Aggregates balances from both SPL Token and Token-2022 accounts.

Audit Logging: Produces a detailed JSON file for community verification.

Deterministic Selection: Entrants are sorted by public key before ticket assignment to ensure reproducible results.

Usage
1. Installation
Bash
python -m venv .venv
source .venv/bin/activate
pip install -e .
2. The Draw Process
Step A: Predict and Announce Calculate a slot for a future time (e.g., 10:00 PM) and announce it to your community to lock in the target.

Bash
solana-lottery predict --time 22:00
Step B: Execute the Draw Once the target slot has passed and reached finalized commitment, run the draw command.

Bash
solana-lottery draw --slot <TARGET_SLOT>
3. Verification
Verify an existing audit file to confirm the result:

Bash
solana-lottery verify --audit audit.json
Technical Notes
Skipped Slots: The tool is designed to handle skipped slots by automatically attempting to fetch the next available produced blockhash, maintaining the integrity of the draw without manual intervention.

Finality: The script requires the slot to be finalized to prevent issues with chain reorganizations.

Disclaimer
This software is provided for experimental and entertainment purposes. Users are responsible for ensuring compliance with local laws and regulations regarding giveaways or lotteries.